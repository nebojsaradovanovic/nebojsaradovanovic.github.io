window._genesys||(window._genesys={}),window._genesys.widgets||(window._genesys.widgets={}),window._genesys.widgets.extensions||(window._genesys.widgets.extensions={}),window._genesys.widgets.extensions.torontoHydro=function(e,t,n){let s=t.registerPlugin("torontoHydro");function i(){return{form:{autoSubmit:!1},formJSON:{wrapper:"<table></table>",inputs:[{id:"cx_webchat_form_firstname",name:"firstname",maxlength:"100",placeholder:"Required",label:"First Name",type:"text",validate:a},{id:"cx_webchat_form_postalcode",name:"postalcode",maxlength:"100",placeholder:"Required",label:"Postal Code",validate:o},{id:"cx_webchat_form_enquirytype",name:"reason",type:"select",label:"Reason",options:[{text:"Report partial power outage",value:"PartialOutage"},{text:"Report electrical Issues",value:"ElectricalIssues"},{text:"Queries around planned outages",value:"PlanedOutages"},{text:"Other",value:"Other"}]}]}}}function a(e,t,n,s,i,a,o){return!!n&&(n.val()?(s[0].classList.remove("invalid"),!0):(s[0].classList.add("invalid"),!1))}function o(e,t,n,s,i,a,o){if(n){if(!n.val())return s[0].classList.add("invalid"),!1;let e=n.val().toString();return new RegExp("^[ABCEGHJ-NPRSTVXYabceghj-nprstvxy]\\d[ABCEGHJ-NPRSTV-Zabceghj-nprstv-z][ -]?\\d[ABCEGHJ-NPRSTV-Zabceghj-nprstv-z]\\d$").test(e)?(s[0].classList.remove("invalid"),!0):(s[0].classList.add("invalid"),!1)}return!1}s.registerCommand("version",(function(e){return console.log("Version: 1.0.0"),e.deferred.resolve("1.0.0")})),s.registerCommand("openChat",(function(e){s.command("WebChat.open",i())})),s.registerCommand("closeDisclaimer",(function(e){s.command("WebChat.hideOverlay")})),s.subscribe("WebChat.opened",(function(e){!function(){if(!window._genesys.widgets.webchat||!window._genesys.widgets.webchat.disclaimer||!window._genesys.widgets.webchat.disclaimer.enabled)return;let e=`<div class='disclaimer'><div class='disclaimer-content'>${window._genesys.widgets.webchat.disclaimer.template}</div><div class='disclaimer-footer'><button class='cx-submit cx-btn cx-btn-primary i18n' data-message='ProceedToChat' aria-label='Proceed &gt;' onclick="CXBus.command('torontoHydro.closeDisclaimer')">Proceed &gt;</button></div></div>`;s.command("WebChat.showOverlay",{html:e,hideFooter:window._genesys.widgets.webchat.disclaimer.fullScreen}).done((function(e){})).fail((function(e){console.error(e)}))}()})),s.before("WebChat.open",(function(e){return console.log(e),i()})),s.subscribe("WebChatService.messageReceived",(function(e){return e})),s.subscribe("WebChatService.agentDisconnected",(function(e){return s.command("WebChat.injectMessage",{type:"HTML",name:"system",text:"<span class='cx-system-message'>AGENT DISCONNECTED</span>",custom:!1,bubble:{fill:"#e8f5f2",radius:"10px",time:!1,name:!1,direction:"none",avatar:{icon:""}}}).done((function(e){})).fail((function(e){})),console.log(e),e})),s.republish("ready"),s.ready()};